<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>í•™êµì¶•ì œ ì§€ë„</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<style>
  html,body { margin:0; height:100%; }
  #map { width:100%; height:100vh; }

  .switch {
    position:absolute;
    top:10px; left:10px;
    z-index:1000;
    background:white;
    padding:8px;
    border-radius:8px;
    box-shadow:0 2px 6px rgba(0,0,0,.2);
  }
  .btn {
    padding:6px 10px;
    margin:2px;
    border-radius:6px;
    background:#eee;
    font-size:13px;
    cursor:pointer;
  }
  .active { background:#bcd6ff; }
</style>
</head>
<body>

<div id="map"></div>

<div class="switch">
  <span class="btn active" onclick="loadMap(1,this)">1,2ì¸µ</span>
  <span class="btn" onclick="loadMap(2,this)">3,4ì¸µ</span>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* =====================================================
   âœ… 1. ì§€ë„ + ë¶€ìŠ¤ ì˜ì—­ ì •ë³´ (ì—¬ê¸°ë§Œ ìˆ˜ì •)
   ===================================================== */
const MAP_DATA = {
  1: {
    image: "maps/map1.png",
    booths: [

      {
        area: [[21,92],[25,86]],
        items: [
          {
            name: "AI Lab",
            club: "ìˆ˜í•™íƒêµ¬ë¶€ A,B / ìœµí•©ê³¼í•™íƒêµ¬ë¶€",
            poster: "posters/AI LAB1.png",
            desc: "ì •ë§ ë¬´ì„œìš´ ê·€ì‹  ë°©íƒˆì¶œ"
          },
          {
            poster:"posters/AI LAB2.png",
            desc:"GAME PARTY"
          }
        ]
      },

      {
        area: [[27,91],[33,86]],
        items: [
          {
            name: "ì»´í“¨í„°ì‹¤",
            club: "ì»´í“¨í„° ìœµí•© ê°œë°œë¶€ A,B",
            poster: "posters/ì»´í“¨í„°ì‹¤.png",
            desc: "í”Œë ˆì´ ê·¸ë¼ìš´ë“œ"
          }
        ]
      },

      {
        area: [[33,92],[37,86]],
        items: [
          {
            name: "ì¹´í˜ì¡´",
            club: "ë°©ì†¡ë¶€",
            poster: "posters/ì¹´í˜ì¡´.png",
            desc: "ì—´ë¦° ë…¸ë˜ë°©"
          }
        ]
      },

      {
        area: [[49,60],[53,55]],
        items: [
          {
            name: "í†µí•©ë°˜2",
            club: "ì—¬ê°€ìƒí™œë¶€",
            desc: "ì˜¤ê°ì„ ì›€ì§ì—¬ë¼~!!"
          }
        ]
      },

      {
        area: [[53,60],[56,55]],
        items: [
          {
            name: "í†µí•©ë°˜1",
            club: "ìš”ë¦¬ì¡°ë¦¬ë¶€",
            desc: "ì•„ì´ì‹± ì¿ í‚¤ ë§Œë“¤ê¸°"
          }
        ]
      },

      {
        area: [[4.5,34],[14,13]],
        items: [
          {
            name: "ì²­ëŒê´€",
            club: "ë°°ë“œë¯¼í„´ë¶€",
            poster: "posters/ì²­ëŒê´€1.png",
            desc: "ë°°ë“œë¯¼í„´ë¶€ë¥¼ ì´ê²¨ë¼"
          },
          {
            club:"í”¼íŠ¸ë‹ˆìŠ¤ë¶€ A,B",
            poster:'asd',
            desc:"ë„ì „! ê¸°ë¡ ì„¸ìš°ê¸°"
          }
        ]
      },
      {
        area: [[20,43],[26,34]],
        items: [
          {
            name: "ìŠ¤ë§ˆíŠ¸ ìœµí•©ì‹¤",
            club: "í”¼ì§€ì»¬ì»´í“¨íŒ…ë¶€",
            poster: "posters/ìŠ¤ìœµì‹¤.png",
            desc: "ë­í•˜ì§€?"
          }
        ]
      },
      {
        area: [[33.5,43],[35.8,34]],
        items: [
          {
            name: "ì˜¤í”ˆí´ë˜ìŠ¤",
            club: "ì •ì‹ ê±´ê°•ë³µì§€ì„¼í„°",
            desc: "ë©˜íƒˆê°•í™” í”„ë¡œì íŠ¸"
          }
        ]
      },
      {
        area: [[48.6,34],[52.6,29.2]],
        items: [
          {
            name: "1-7",
            club: "ì…ë¬¸ ì‚¬íšŒ íƒêµ¬ë¶€",
            poster: "posters/1-7.png",
            desc: "ì¸ì‚¬ ì•¡ì„¸ì„œë¦¬ ë§Œë“¤ê¸°"
          }
        ]
      },
      {
        area: [[44.6,34],[48.4,29.2]],
        items: [
          {
            name: "1-8",
            club: "ì‹œì‚¬í† ë¡ ë¶€",
            poster: "posters/1-8.png",
            desc: "ì†Œí†µê³µì‘ì†Œ"
          }
        ]
      },
      {
        area: [[40.7,34],[44.5,29.2]],
        items: [
          {
            name: "1-9",
            club: "ë¦¬ì–¼ë¼ì´ì¦ˆ",
            poster: "posters/1-9.png",
            desc: "HOHOHOP"
          }
        ]
      },
      {
        area: [[29.6,32],[33.4,26.2]],
        items: [
          {
            name: "1-10",
            club: "ì‚¬íšŒ ê²½ì˜ ê²½ì œë¶€",
            poster: "posters/1-10.png",
            desc: "ì‚¬ë‘í•œë‹¤. ë§Œë‘ë¥¼ ì‚¬ì£¼ê² ë‹¤"
          }
        ]
      },
      {
        area: [[18.8,32],[23.8,26.2]],
        items: [
          {
            name: "ë©”ì´ì»¤ì‹¤",
            club: "ë©”ì´ì»¤ë¶€",
            poster: "posters/ë©”ì´ì»¤.png",
            desc: "ì˜¤ê° ë©”ì´í‚¹ ë°ì´"
          }
        ]
      },
      {
        area: [[33.7,25.8],[38.2,13]],
        items: [
          {
            name: "2ì¸µ í™ˆë² ì´ìŠ¤",
            club: "í•™ë¶€ëª¨íšŒ",
            desc: "ì„¸êµ ë¶„ì‹"
          }
        ]
      },
      {
        area: [[52.8,12.7],[56.6,7.7]],
        items: [
          {
            name: "Wee í´ë˜ìŠ¤",
            club: "Wee ì‹¬ë¦¬ë¶€",
            desc: "ì„¼ì„¸Weeì…˜"
          }
        ]
      },
      {
        area: [[33.6,29],[36.6,26.2]],
        items: [
          {
            name: "ì˜¤í”ˆìŠ¤íŠœë””ì˜¤",
            desc: "ëª¨ë‹¥ë¶ˆ íƒ€ë¡œ ìƒë‹´"
          }
        ]
      },
      

    ]
  },

  2: {
    image: "maps/map2.png",
    booths: [
      {
        area: [[56.8,57],[61.6,52]],
        items: [
          {
            name: "ì¤‘ì•™ë¬´ëŒ€",
            club: "ê³µì—°ë¶€",
            poster: "posters/booth3.png",
            desc: "ë°´ë“œ ê³µì—°"
          }
        ]
      },
      {
        area: [[52.3,57],[56.5,51.9]],
        items: [
          {
            name: "3-7",
            club: "ì˜ì–´ íšŒí™”ë¶€",
            poster: "posters/3-7.png",
            desc: "ì˜ì–´ë¡œ ë§í•´ìš”"
          }
        ]
      },
      {
        area: [[46.5,57],[52,51.9]],
        items: [
          {
            name: "3-8",
            club: "ë¬¸í•™ ì°½ì‘ë¶€",
            poster: "posters/3-8.png",
            desc: "ë‚˜ë§Œì˜ ì±… ë§Œë“¤ê¸°"
          }
        ]
      },
      {
        area: [[32.2,34],[37,28]],
        items: [
          {
            name: "3-9",
            club: "ì—­ì‚¬ íƒêµ¬ë¶€",
            poster: "posters/3-9.png",
            desc: "ì—­ì‚¬ í€´ì¦ˆ ëŒ€íšŒ"
          }
        ]
      },
    ]
  }
};


/* =====================================================
   âŒ ì•„ë˜ëŠ” ìˆ˜ì • ì•ˆ í•´ë„ ë¨
   ===================================================== */

let map = L.map('map', {
  crs: L.CRS.Simple,
  minZoom: -2,
  maxZoom: 4,
  attributionControl:false
});

let imageLayer;
let boothLayer = L.layerGroup().addTo(map);
let imgW, imgH;

// í¼ì„¼íŠ¸ â†’ Leaflet ì¢Œí‘œ
function toLatLng(x,y){
  return L.latLng((y/100)*imgH,(x/100)*imgW);
}

// ì§€ë„ ë¶ˆëŸ¬ì˜¤ê¸°
function loadMap(num,btn){
  const data = MAP_DATA[num];

  document.querySelectorAll('.btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');

  const img = new Image();
  img.src = data.image;

  img.onload = ()=>{
    imgW = img.naturalWidth;
    imgH = img.naturalHeight;
    const bounds = [[0,0],[imgH,imgW]];

    if(imageLayer) map.removeLayer(imageLayer);
    boothLayer.clearLayers();

    imageLayer = L.imageOverlay(data.image,bounds).addTo(map);
    map.fitBounds(bounds);

    // âœ… ë¶€ìŠ¤ ì˜ì—­(ì‚¬ê°í˜•) ìƒì„±
    data.booths.forEach(b=>{
      const p1 = toLatLng(b.area[0][0], b.area[0][1]);
      const p2 = toLatLng(b.area[1][0], b.area[1][1]);

      const rect = L.rectangle([p1,p2], {
        color: "transparent", // ğŸ”§ í…ŒìŠ¤íŠ¸ ì¤‘ì—” "red" ì¶”ì²œ
        weight: 0,
        fillOpacity: 0
      }).addTo(boothLayer);

      rect.bindPopup(
        b.items.map(item => `
            <div style="margin-bottom:14px;">

                ${item.name ? `<b>${item.name}</b><br>` : ``}

                ${item.club ? `
                    <span style="font-size:13px; color:#555;">
                        ë™ì•„ë¦¬: ${item.club}
                    </span><br><br>
                ` : ``}

                ${item.poster ? `
                    <img src="${item.poster}" style="width:220px"><br>
                ` : ``}

                ${item.desc ? `
                    <div>${item.desc}</div>
                ` : ``}

            </div>
            <hr>
        `).join('')
);


    });
  };
}

// ì²˜ìŒ ì§€ë„
loadMap(1, document.querySelector('.btn'));

/* =====================================================
   âœ… ì¢Œí‘œ í™•ì¸ìš© (ì˜ì—­ ì¡ì„ ë•Œë§Œ ì‚¬ìš©)
   ===================================================== */
map.on('click', function(e){
  if(!imgW || !imgH) return;

  const x = (e.latlng.lng / imgW * 100).toFixed(1);
  const y = (e.latlng.lat / imgH * 100).toFixed(1);

  L.popup()
    .setLatLng(e.latlng)
    .setContent(`
      <b>í¼ì„¼íŠ¸ ì¢Œí‘œ</b><br>
      x: ${x}%<br>
      y: ${y}%
    `)
    .openOn(map);

  console.log(`[${x}, ${y}]`);
});
</script>

</body>
</html>